{"version":3,"sources":["webpack:///webpack/bootstrap 0af72bd42bffd4bce248","webpack:///./src/media-modal/media-modal.js","webpack:///./src/media-modal/media-modal.css"],"names":["media","wp","view","AppleMusicItem","Backbone","View","extend","tagName","className","render","template","options","tab","$el","html","model","toJSON","Toolbar","AppleMusic","initialize","_","defaults","event","close","items","inserter","id","style","text","appleMusic","labels","insert","priority","click","controller","state","appleMusicInsert","prototype","apply","arguments","set","Button","classes","loadmore","refresh","selection","props","get","jQuery","prop","length","events","_this","collection","Collection","createSidebar","createToolbar","clearItems","reset","attr","show","hide","on","changedParams","loading","loaded","changedPage","paginate","fetchItems","getSelection","models","container","document","createDocumentFragment","each","appendChild","renderItem","find","append","closest","addClass","el","prepend","toolbar_template","sidebar","Sidebar","views","add","createSingle","that","AttachmentDisplaySettings","removeSelectionHandler","target","currentTarget","removeFromSelection","preventDefault","toggleSelectionHandler","href","replace","disposeSingle","addToSelection","unset","removeClass","clearSelection","_byId","trigger","remove","empty","response","data","_nonce","params","page","max_id","ajax","context","success","fetchedSuccess","error","fetchedError","fetchedEmpty","moreEmpty","concat","noresults","error_message","updateInput","els","k","n","val","post_frame","MediaFrame","Post","router","toolbar","menu","title","tabs","bind","appleMusicContentRender","defaultSet","content","states","createRouter","appleMusicRouterRender","appleMusicToolbarCreate","service","tab_id","State","Model","fetchOnRender","frame","format","$","shortcodes","shortcode","push","tinymce","activeEditor","isHidden","editor","toArray","join","Settings","AttachmentDisplay","description","attributes","call"],"mappings":"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","file":"js/mediaModal.bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wp-content/plugins/apple-music/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 165);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0af72bd42bffd4bce248","/*\n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n the Free Software Foundation; either version 2 of the License, or\n (at your option) any later version.\n\n This program is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU General Public License for more details.\n\n */\n\nvar media = wp.media;\n\n// VIEW: MEDIA ITEM:\n\nmedia.view.AppleMusicItem = wp.Backbone.View.extend( {\n\n\ttagName: 'li',\n\tclassName: 'apple-music-item attachment',\n\n\trender: function () {\n\t\tthis.template = media.template( 'apple-music-item-' + this.options.tab );\n\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// VIEW - BOTTOM TOOLBAR\n\nmedia.view.Toolbar.AppleMusic = media.view.Toolbar.extend( {\n\n\tinitialize: function () {\n\n\t\t_.defaults( this.options, {\n\t\t\tevent: 'inserter',\n\t\t\tclose: false,\n\t\t\titems: {\n\t\t\t\t// See wp.media.view.Button\n\t\t\t\tinserter: {\n\t\t\t\t\tid: 'apple-music-button',\n\t\t\t\t\tstyle: 'primary',\n\t\t\t\t\ttext: appleMusic.labels.insert,\n\t\t\t\t\tpriority: 80,\n\t\t\t\t\tclick: function () {\n\t\t\t\t\t\tthis.controller.state().appleMusicInsert();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tmedia.view.Toolbar.prototype.initialize.apply( this, arguments );\n\n\t\tthis.set( 'pagination', new media.view.Button( {\n\t\t\ttagName: 'button',\n\t\t\tclasses: 'apple-music-pagination button button-secondary',\n\t\t\tid: 'apple-music-loadmore',\n\t\t\ttext: appleMusic.labels.loadmore,\n\t\t\tpriority: - 20\n\t\t} ) );\n\t},\n\n\trefresh: function () {\n\n\t\tvar selection = this.controller.state().props.get( '_all' ).get( 'selection' );\n\n\t\tjQuery( '#apple-music-button' ).prop( 'disabled', ! selection.length );\n\n\t\t//this.get( 'inserter' ).model.set( 'disabled', true );\n\t\tmedia.view.Toolbar.prototype.refresh.apply( this, arguments );\n\n\t}\n\n} );\n\n// VIEW - MEDIA CONTENT AREA\n\nmedia.view.AppleMusic = media.View.extend( {\n\n\tevents: {\n\t\t'click .apple-music-item-area': 'toggleSelectionHandler',\n\t\t'click .apple-music-item .check': 'removeSelectionHandler',\n\t\t'submit .apple-music-toolbar form': 'updateInput'\n\t},\n\n\tinitialize: function () {\n\n\t\t/* fired when you switch router tabs */\n\n\t\tvar _this = this;\n\n\t\tthis.collection = new Backbone.Collection();\n\t\tthis.tab = this.options.tab;\n\n\t\tthis.createSidebar();\n\t\tthis.createToolbar();\n\t\tthis.clearItems();\n\n\t\tif ( this.model.get( 'items' ) ) {\n\n\t\t\tthis.collection = new Backbone.Collection();\n\t\t\tthis.collection.reset( this.model.get( 'items' ) );\n\n\t\t\tjQuery( '#apple-music-loadmore' ).attr( 'disabled', false ).show();\n\t\t} else {\n\t\t\tjQuery( '#apple-music-loadmore' ).hide();\n\t\t}\n\n\t\tthis.collection.on( 'reset', this.render, this );\n\n\t\tthis.model.on( 'change:params', this.changedParams, this );\n\n\t\tthis.on( 'loading', this.loading, this );\n\t\tthis.on( 'loaded', this.loaded, this );\n\t\tthis.on( 'change:params', this.changedParams, this );\n\t\tthis.on( 'change:page', this.changedPage, this );\n\n\t\tjQuery( '.apple-music-pagination' ).click( function ( event ) {\n\t\t\t_this.paginate( event );\n\t\t} );\n\n\t\tif ( _this.model.get( 'fetchOnRender' ) ) {\n\t\t\t_this.model.set( 'fetchOnRender', false );\n\t\t\t_this.fetchItems();\n\t\t}\n\n\t},\n\n\trender: function () {\n\n\t\t/* fired when you switch router tabs */\n\n\t\tvar selection = this.getSelection();\n\n\t\tif ( this.collection && this.collection.models.length ) {\n\n\t\t\tthis.clearItems();\n\n\t\t\tvar container = document.createDocumentFragment();\n\n\t\t\tthis.collection.each( function ( model ) {\n\t\t\t\tcontainer.appendChild( this.renderItem( model ) );\n\t\t\t}, this );\n\n\t\t\tthis.$el.find( '.apple-music-items' ).append( container );\n\n\t\t}\n\n\t\tselection.each( function ( model ) {\n\t\t\tvar id = '#apple-music-item-apple-music-' + this.tab + '-' + model.get( 'id' );\n\t\t\tthis.$el.find( id ).closest( '.apple-music-item' ).addClass( 'selected details' );\n\t\t}, this );\n\n\t\tjQuery( '#apple-music-button' ).prop( 'disabled', ! selection.length );\n\n\n\t\treturn this;\n\n\t},\n\n\trenderItem: function ( model ) {\n\n\t\tvar view = new media.view.AppleMusicItem( {\n\t\t\tmodel: model,\n\t\t\ttab: this.tab\n\t\t} );\n\n\t\treturn view.render().el;\n\n\t},\n\n\tcreateToolbar: function () {\n\n\t\t// @TODO this could be a separate view:\n\t\thtml = '<div class=\"apple-music-error attachments\"></div>';\n\t\tthis.$el.prepend( html );\n\n\t\t// @TODO this could be a separate view:\n\t\thtml = '<div class=\"apple-music-empty attachments\"></div>';\n\t\tthis.$el.prepend( html );\n\n\t\t// @TODO this could be a separate view:\n\t\thtml = '<ul class=\"apple-music-items attachments clearfix\"></ul>';\n\t\tthis.$el.append( html );\n\n\t\t// @TODO this could be a separate view:\n\t\tvar toolbar_template = media.template( 'apple-music-search-' + this.tab );\n\t\thtml = '<div class=\"apple-music-toolbar media-toolbar clearfix\">' + toolbar_template( this.model.toJSON() ) + '</div>';\n\t\tthis.$el.prepend( html );\n\n\t},\n\n\tcreateSidebar: function () {\n\t\tvar sidebar = this.sidebar = new wp.media.view.Sidebar( {\n\t\t\tcontroller: this.controller\n\t\t} );\n\n\t\tthis.views.add( sidebar );\n\t},\n\n\n\tcreateSingle: function ( model, id ) {\n\t\tvar sidebar = this.sidebar,\n\t\t\tthat = this,\n\t\t\thtml = '';\n\n\t\tsidebar.set( 'display', new AttachmentDisplaySettings( {\n\t\t\tcontroller: this.controller,\n\t\t\tmodel: model,\n\t\t\tpriority: 160,\n\t\t\ttab: this.tab\n\t\t} ) );\n\t\tsidebar.$el.addClass( 'visible' );\n\n\t},\n\n\tremoveSelectionHandler: function ( event ) {\n\n\t\tvar target = jQuery( '#' + event.currentTarget.id );\n\t\tvar id = target.attr( 'data-id' );\n\n\t\tthis.removeFromSelection( target, id );\n\n\t\tevent.preventDefault();\n\n\t},\n\n\ttoggleSelectionHandler: function ( event ) {\n\n\t\tif ( event.target.href ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar target = jQuery( '#' + event.currentTarget.id.replace( /(:|\\.|\\[|\\]|,|=|@)/g, \"\\\\$1\" ) );\n\t\tvar id = target.attr( 'data-id' );\n\n\t\tif ( this.getSelection().get( id ) ) {\n\t\t\tthis.removeFromSelection( target, id );\n\t\t\tthis.disposeSingle();\n\t\t} else {\n\t\t\tthis.addToSelection( target, id );\n\t\t\tthis.createSingle( this.getSelection().get( id ), id );\n\t\t}\n\n\t},\n\n\tdisposeSingle: function () {\n\t\tvar sidebar = this.sidebar;\n\t\tsidebar.unset( 'details' );\n\t\tsidebar.unset( 'display' );\n\t\t// Hide the sidebar on mobile\n\t\tsidebar.$el.removeClass( 'visible' );\n\t},\n\n\taddToSelection: function ( target, id ) {\n\n\t\tthis.clearSelection();\n\t\tthis.$el.find( '.apple-music-item' ).removeClass( 'selected details' );\n\t\t\n\t\ttarget.closest( '.apple-music-item' ).addClass( 'selected details' );\n\t\tthis.getSelection().add( this.collection._byId[id] );\n\n\t\t// @TODO why isn't this triggered by the above line?\n\t\tthis.controller.state().props.trigger( 'change:selection' );\n\n\t},\n\n\tremoveFromSelection: function ( target, id ) {\n\n\t\ttarget.closest( '.apple-music-item' ).removeClass( 'selected details' );\n\n\t\tthis.getSelection().remove( this.collection._byId[id] );\n\n\t\t// @TODO why isn't this triggered by the above line?\n\t\tthis.controller.state().props.trigger( 'change:selection' );\n\n\t},\n\n\tclearSelection: function () {\n\t\tthis.getSelection().reset();\n\t},\n\n\tgetSelection: function () {\n\t\treturn this.controller.state().props.get( '_all' ).get( 'selection' );\n\t},\n\n\tclearItems: function () {\n\t\tthis.$el.find( '.apple-music-item' ).removeClass( 'selected details' );\n\t\tthis.$el.find( '.apple-music-items' ).empty();\n\t\tthis.$el.find( '.apple-music-pagination' ).hide();\n\n\t},\n\n\tloading: function () {\n\t\tthis.$el.find( '.spinner' ).addClass( 'is-active' );\n\t\tthis.$el.find( '.apple-music-error' ).hide().text( '' );\n\t\tthis.$el.find( '.apple-music-empty' ).hide().text( '' );\n\t\tjQuery( '#apple-music-loadmore' ).attr( 'disabled', true );\n\t},\n\n\tloaded: function ( response ) {\n\t\tthis.$el.find( '.spinner' ).removeClass( 'is-active' );\n\t},\n\n\tfetchItems: function () {\n\n\t\tthis.trigger( 'loading' );\n\n\t\tvar data = {\n\t\t\t_nonce: appleMusic._nonce,\n\t\t\ttab: this.tab,\n\t\t\tparams: this.model.get( 'params' ),\n\t\t\tpage: this.model.get( 'page' ),\n\t\t\tmax_id: this.model.get( 'max_id' )\n\t\t};\n\n\n\t\tmedia.ajax( 'apple_music_request', {\n\t\t\tcontext: this,\n\t\t\tsuccess: this.fetchedSuccess,\n\t\t\terror: this.fetchedError,\n\t\t\tdata: data\n\t\t} );\n\n\t},\n\n\tfetchedSuccess: function ( response ) {\n\n\t\tif ( ! this.model.get( 'page' ) ) {\n\n\t\t\tif ( ! response.items ) {\n\t\t\t\tthis.fetchedEmpty( response );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.model.set( 'items', response.items );\n\n\t\t\tthis.collection.reset( response.items );\n\n\t\t} else {\n\n\t\t\tif ( ! response.items ) {\n\t\t\t\tthis.moreEmpty( response );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.model.set( 'items', this.model.get( 'items' ).concat( response.items ) );\n\n\t\t\tvar collection = new Backbone.Collection( response.items );\n\t\t\tvar container = document.createDocumentFragment();\n\n\t\t\tthis.collection.add( collection.models );\n\n\t\t\tcollection.each( function ( model ) {\n\t\t\t\tcontainer.appendChild( this.renderItem( model ) );\n\t\t\t}, this );\n\n\t\t\tthis.$el.find( '.apple-music-items' ).append( container );\n\n\t\t}\n\n\t\tjQuery( '#apple-music-loadmore' ).attr( 'disabled', false ).show();\n\t\t\n\t\tthis.trigger( 'loaded loaded:success', response );\n\n\t},\n\n\tfetchedEmpty: function ( response ) {\n\n\t\tthis.$el.find( '.apple-music-empty' ).text( appleMusic.labels.noresults ).show();\n\n\t\tthis.$el.find( '.apple-music-pagination' ).hide();\n\n\t\tthis.trigger( 'loaded loaded:noresults', response );\n\n\t},\n\n\tfetchedError: function ( response ) {\n\n\t\tthis.$el.find( '.apple-music-error' ).text( response.error_message ).show();\n\t\tjQuery( '#apple-music-loadmore' ).attr( 'disabled', false ).show();\n\t\tthis.trigger( 'loaded loaded:error', response );\n\n\t},\n\n\tupdateInput: function ( event ) {\n\n\t\t// triggered when a search is submitted\n\n\t\tvar params = this.model.get( 'params' );\n\t\tvar els = this.$el.find( '.apple-music-toolbar' ).find( ':input' ).each( function ( k, el ) {\n\t\t\tvar n = jQuery( this ).attr( 'name' );\n\t\t\tif ( n ) {\n\t\t\t\tparams[n] = jQuery( this ).val();\n\t\t\t}\n\t\t} );\n\n\t\tthis.clearSelection();\n\t\tjQuery( '#apple-music-button' ).attr( 'disabled', 'disabled' );\n\t\tthis.model.set( 'params', params );\n\t\tthis.trigger( 'change:params' ); // why isn't this triggering automatically? might be because params is an object\n\n\t\tevent.preventDefault();\n\n\t},\n\n\tpaginate: function ( event ) {\n\n\t\tif ( 0 == this.collection.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar page = this.model.get( 'page' ) || 1;\n\n\t\tthis.model.set( 'page', page + 1 );\n\t\tthis.trigger( 'change:page' );\n\n\t\tevent.preventDefault();\n\n\t},\n\n\tchangedPage: function () {\n\n\t\t// triggered when the pagination is changed\n\n\t\tthis.fetchItems();\n\n\t},\n\n\tchangedParams: function () {\n\n\t\t// triggered when the search parameters are changed\n\n\t\tthis.model.set( 'page', null );\n\t\tthis.clearItems();\n\t\tthis.fetchItems();\n\n\t}\n\n} );\n\n// VIEW - MEDIA FRAME (MENU BAR)\n\nvar post_frame = media.view.MediaFrame.Post;\n\nmedia.view.MediaFrame.Post = post_frame.extend( {\n\n\tinitialize: function () {\n\n\t\tpost_frame.prototype.initialize.apply( this, arguments );\n\n\n\t\tvar id = 'apple-music-service-apple-music';\n\t\tvar controller = {\n\t\t\tid: id,\n\t\t\trouter: id + '-router',\n\t\t\ttoolbar: id + '-toolbar',\n\t\t\tmenu: 'default',\n\t\t\ttitle: appleMusic.labels.title,\n\t\t\ttabs: appleMusic.tabs,\n\t\t\tpriority: 100 // places it above Insert From URL\n\t\t};\n\n\t\tfor ( var tab in appleMusic.tabs ) {\n\n\t\t\t// Content\n\t\t\tthis.on( 'content:render:' + id + '-content-' + tab, _.bind( this.appleMusicContentRender, this, appleMusic, tab ) );\n\n\t\t\t// Set the first tab to default.\n\t\t\tif ( typeof defaultSet === 'undefined' ) {\n\t\t\t\tcontroller.content = id + '-content-' + tab;\n\t\t\t\tvar defaultSet = true;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.states.add( [\n\t\t\tnew media.controller.AppleMusic( controller )\n\t\t] );\n\n\t\t// Tabs\n\t\tthis.on( 'router:create:' + id + '-router', this.createRouter, this );\n\t\tthis.on( 'router:render:' + id + '-router', _.bind( this.appleMusicRouterRender, this, appleMusic ) );\n\n\t\t// Toolbar\n\t\tthis.on( 'toolbar:create:' + id + '-toolbar', this.appleMusicToolbarCreate, this );\n\n\t},\n\n\tappleMusicRouterRender: function ( service, view ) {\n\n\t\tvar id = 'apple-music-service-apple-music';\n\t\tvar tabs = {};\n\n\t\tfor ( var tab in appleMusic.tabs ) {\n\t\t\ttab_id = id + '-content-' + tab;\n\t\t\ttabs[tab_id] = {\n\t\t\t\ttext: appleMusic.tabs[tab]\n\t\t\t};\n\t\t}\n\n\t\tview.set( tabs );\n\n\t},\n\n\n\tappleMusicContentRender: function ( service, tab ) {\n\n\t\t/* called when a tab becomes active */\n\n\t\tthis.content.set( new media.view.AppleMusic( {\n\t\t\tcontroller: this,\n\t\t\tmodel: this.state().props.get( tab ),\n\t\t\ttab: tab,\n\t\t\tclassName: 'clearfix attachments-browser apple-music-content apple-music-content-apple-music apple-music-content-apple-music-' + tab\n\t\t} ) );\n\n\t},\n\n\tappleMusicToolbarCreate: function ( toolbar ) {\n\t\ttoolbar.view = new media.view.Toolbar.AppleMusic( {\n\t\t\tcontroller: this\n\t\t} );\n\n\t}\n\n} );\n\n// CONTROLLER:\n\nmedia.controller.AppleMusic = media.controller.State.extend( {\n\n\tinitialize: function ( options ) {\n\n\t\tthis.props = new Backbone.Collection();\n\n\t\tfor ( var tab in options.tabs ) {\n\n\t\t\tthis.props.add( new Backbone.Model( {\n\t\t\t\tid: tab,\n\t\t\t\tparams: {},\n\t\t\t\tpage: null,\n\t\t\t\tfetchOnRender: options.tabs[tab].fetchOnRender,\n\t\t\t} ) );\n\n\t\t}\n\n\t\tthis.props.add( new Backbone.Model( {\n\t\t\tid: '_all',\n\t\t\tselection: new Backbone.Collection()\n\t\t} ) );\n\n\t\tthis.props.on( 'change:selection', this.refresh, this );\n\n\t},\n\n\trefresh: function () {\n\t\tthis.frame.toolbar.get().refresh();\n\t},\n\n\tappleMusicInsert: function () {\n\n\t\tvar format = $('.media-sidebar input[name=\"format\"]:checked').val();\n\n\t\tvar selection = this.frame.content.get().getSelection(),\n\t\t\tshortcodes = [];\n\n\t\tselection.each( function ( model ) {\n\n\t\t\tif ( typeof(\n\t\t\t\t\tformat\n\t\t\t\t) === 'undefined' ) {\n\t\t\t\tvar shortcode = model.get( 'shortcode' );\n\t\t\t} else {\n\t\t\t\tvar shortcode = model.get( 'shortcode' ).replace( ']', 'format=\"' + format + '\"]' );\n\t\t\t}\n\n\t\t\tshortcodes.push( shortcode );\n\t\t}, this );\n\n\t\tif ( typeof(\n\t\t\t\ttinymce\n\t\t\t) === 'undefined' || tinymce.activeEditor === null || tinymce.activeEditor.isHidden() ) {\n\t\t\tmedia.editor.insert( _.toArray( shortcodes ).join( \"\\n\\n\" ) );\n\t\t} else {\n\t\t\tmedia.editor.insert( \"<p>\" + _.toArray( shortcodes ).join( \"</p><p>\" ) + \"</p>\" );\n\t\t}\n\n\t\tselection.reset();\n\t\tthis.frame.close();\n\n\t},\n\n} );\n\nAttachmentDisplaySettings = media.view.Settings.AttachmentDisplay.extend( {\n\n\ttemplate: wp.template( 'apple-music-sidebar' ),\n\n\tinitialize: function () {\n\t\tmedia.view.Settings.AttachmentDisplay.prototype.initialize.apply( this, arguments );\n\t},\n\n\t/**\n\t * @returns {wp.media.view.Settings.AttachmentDisplay} Returns itself to allow chaining\n\t */\n\trender: function () {\n\t\t_.extend( this.options, {\n\t\t\tdescription: this.options.model.attributes.description,\n\t\t\tcontent: this.options.model.attributes.content,\n\t\t} );\n\n\t\tmedia.view.Settings.AttachmentDisplay.prototype.render.call( this );\n\n\t\treturn this;\n\t},\n} );\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/media-modal/media-modal.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/media-modal/media-modal.css\n// module id = 167\n// module chunks = 1"],"sourceRoot":""}